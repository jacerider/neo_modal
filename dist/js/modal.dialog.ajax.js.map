{"version":3,"file":"modal-dialog-ajax.js","sources":["../../../../../../modules/contrib/neo_modal/src/js/modal-dialog-ajax.ts"],"sourcesContent":["import { NeoModal } from \"./modal/modal\";\n\n(function (Drupal) {\n\n  if (Drupal.AjaxCommands) {\n\n    /**\n     * Command to open a dialog.\n     *\n     * @param {Drupal.Ajax} ajax\n     *   The Drupal Ajax object.\n     * @param {object} response\n     *   Object holding the server response.\n     * @param {number} [status]\n     *   The HTTP status code.\n     *\n     * @return {boolean|undefined}\n     *   Returns false if there was no selector property in the response object.\n     */\n    Drupal.AjaxCommands.prototype.openDialog = function (_ajax, response, _status) {\n      if (Drupal.neoModal) {\n        let options:any = {};\n        if (typeof response.settings === 'object') {\n          options = Object.assign({}, options, response.settings);\n        }\n        if (response.data) {\n          options['content'] = response.data;\n        }\n        options['onBeforeOpen'] = (modal:NeoModal) => {\n          const content = modal.getContent();\n          if (content) {\n            content.querySelectorAll('.dialog-cancel').forEach((el) => {\n              el.addEventListener('click', e => {\n                modal.close();\n                e.preventDefault();\n                e.stopPropagation();\n              });\n            });\n          }\n        };\n        // Close any existing. May need to be reworked. Doing this just for\n        // views_ui right now.\n        if (typeof options.nest === 'undefined' || options.nest === false) {\n          Drupal.neoModal.close();\n        }\n        Drupal.neoModal.open(options);\n      }\n    } as drupal.Core.IAjaxCommand;\n\n    /**\n     * Command to close a dialog.\n     *\n     * If no selector is given, it defaults to trying to close the modal.\n     *\n     * @param {Drupal.Ajax} [ajax]\n     *   The ajax object.\n     * @param {object} response\n     *   Object holding the server response.\n     * @param {string} response.selector\n     *   The selector of the dialog.\n     * @param {boolean} response.persist\n     *   Whether to persist the dialog element or not.\n     * @param {number} [status]\n     *   The HTTP status code.\n     */\n    Drupal.AjaxCommands.prototype.closeDialog = function (_ajax, _response, _status) {\n      if (Drupal.neoModal) {\n        Drupal.neoModal.close();\n      }\n    } as drupal.Core.IAjaxCommand;\n\n    /**\n     * Command to set a dialog property.\n     *\n     * JQuery UI specific way of setting dialog options.\n     *\n     * @param {Drupal.Ajax} [ajax]\n     *   The Drupal Ajax object.\n     * @param {object} response\n     *   Object holding the server response.\n     * @param {string} response.selector\n     *   Selector for the dialog element.\n     * @param {string} response.optionsName\n     *   Name of a key to set.\n     * @param {string} response.optionValue\n     *   Value to set.\n     * @param {number} [status]\n     *   The HTTP status code.\n     */\n    Drupal.AjaxCommands.prototype.setDialogOption = function (_ajax, _response, _status) {\n      console.log('Not yet supported in Neo Modal.', 'setDialogOption');\n    } as drupal.Core.IAjaxCommand;\n\n    /**\n     * Ajax command to open URL in a modal dialog.\n     *\n     * @param {Drupal.Ajax} [ajax]\n     *   An Ajax object.\n     * @param {object} response\n     *   The Ajax response.\n     */\n    Drupal.AjaxCommands.prototype.openModalDialogWithUrl = function (_ajax, _response, _status) {\n      console.log('Not yet supported in Neo Modal.', 'openModalDialogWithUrl');\n    } as drupal.Core.IAjaxCommand;\n  }\n\n})(Drupal);\n\nexport {};\n"],"names":["Drupal","_ajax","response","_status","options","modal","content","el","e","_response"],"mappings":"CAEC,SAAUA,GAAQ;AAEjB,EAAIA,EAAO,iBAeTA,EAAO,aAAa,UAAU,aAAa,SAAUC,GAAOC,GAAUC,GAAS;AAC7E,QAAIH,EAAO,UAAU;AACnB,UAAII,IAAc,CAAC;AACf,MAAA,OAAOF,EAAS,YAAa,aAC/BE,IAAU,OAAO,OAAO,CAAI,GAAAA,GAASF,EAAS,QAAQ,IAEpDA,EAAS,SACHE,EAAA,UAAaF,EAAS,OAExBE,EAAA,eAAkB,CAACC,MAAmB;AACtC,cAAAC,IAAUD,EAAM,WAAW;AACjC,QAAIC,KACFA,EAAQ,iBAAiB,gBAAgB,EAAE,QAAQ,CAACC,MAAO;AACtD,UAAAA,EAAA,iBAAiB,SAAS,CAAKC,MAAA;AAChC,YAAAH,EAAM,MAAM,GACZG,EAAE,eAAe,GACjBA,EAAE,gBAAgB;AAAA,UAAA,CACnB;AAAA,QAAA,CACF;AAAA,MAEL,IAGI,OAAOJ,EAAQ,OAAS,OAAeA,EAAQ,SAAS,OAC1DJ,EAAO,SAAS,MAAM,GAExBA,EAAO,SAAS,KAAKI,CAAO;AAAA,IAAA;AAAA,EAEhC,GAkBAJ,EAAO,aAAa,UAAU,cAAc,SAAUC,GAAOQ,GAAWN,GAAS;AAC/E,IAAIH,EAAO,YACTA,EAAO,SAAS,MAAM;AAAA,EAE1B,GAoBAA,EAAO,aAAa,UAAU,kBAAkB,SAAUC,GAAOQ,GAAWN,GAAS;AAC3E,YAAA,IAAI,mCAAmC,iBAAiB;AAAA,EAClE,GAUAH,EAAO,aAAa,UAAU,yBAAyB,SAAUC,GAAOQ,GAAWN,GAAS;AAClF,YAAA,IAAI,mCAAmC,wBAAwB;AAAA,EACzE;AAGJ,GAAG,MAAM;"}
