{"version":3,"file":"modal.js","sources":["../../src/js/modal/signal.ts","../../src/js/modal/modal.ts","../../src/js/modal.ts"],"sourcesContent":["class Signal<S, T> implements ISignal<S,T> {\n  private handlers: Array<(source: S, data: T) => void> = [];\n\n  public on(handler: (source: S, data: T) => void): void {\n      this.handlers.push(handler);\n  }\n\n  public off(handler: (source: S, data: T) => void): void {\n      this.handlers = this.handlers.filter(h => h !== handler);\n  }\n\n  public trigger(source: S, data: T): void {\n      // Duplicate the array to avoid side effects during iteration.\n      this.handlers.slice(0).forEach(h => h(source, data));\n  }\n\n  public expose(): ISignal<S,T> {\n      return this\n  }\n}\n\nexport {Signal};\n","import { Signal } from './signal';\n\nclass NeoModal {\n\n  protected options:neoModal.NeoModalOptions;\n  protected originalOptions:neoModal.NeoModalOptions|null = null;\n  protected static colorDefaults:neoModal.NeoModalColorOptions = {\n    contentColor: '',\n    contentColorBg: '',\n    contentFooterColor: '',\n    contentFooterColorBg: '',\n    headerColor: '',\n    headerColorBg: '',\n    footerColor: '',\n    footerColorBg: '',\n    loaderColor: '',\n    loaderColorBg: '',\n    backdropColorBg: '',\n    navColor: '',\n    navColorBg: '',\n  };\n  protected static defaults:neoModal.NeoModalOptions = Object.assign({}, {\n    appendTo: null,\n    appendToClosest: null,\n    wrapperClasses: null,\n    modalClasses: null,\n    colorScheme: 'scheme--reset',\n    colorSchemeInherit: false,\n    trigger: null,\n    placement: 'center',\n    width: 'auto',\n    height: 'auto',\n    zIndex: null,\n    displaceTop: '',\n    displaceRight: '',\n    displaceBottom: '',\n    displaceLeft: '',\n    image: null,\n    video: null,\n    iframe: null,\n    group: null,\n    fit: false,\n    nest: true,\n    drag: true,\n    bodyLock: true,\n    downloadLink: true,\n    shareLink: true,\n    copyLink: true,\n    videoAutoplay: true,\n    videoRatio: '16x9',\n    smartActions: false,\n    content: null,\n    contentPadding: '',\n    contentScroll: false,\n    contentAnimateIn: 'comingIn',\n    contentAnimateInSpeed: null,\n    contentAnimateInDelay: null,\n    contentAnimateOut: 'comingOut',\n    contentAnimateOutSpeed: 'fastest',\n    contentAnimateOutDelay: null,\n    closeButton: 'end',\n    closeButtonSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" class=\"neo-modal--close-icon\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"/><path fill-rule=\"evenodd\" d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"/></svg>',\n    closeButtonClasses: '',\n    closeButtonAnimateIn: 'fadeIn',\n    closeButtonAnimateInSpeed: null,\n    closeButtonAnimateInDelay: 'fast',\n    closeButtonAnimateOut: false,\n    closeButtonAnimateOutSpeed: null,\n    closeButtonAnimateOutDelay: null,\n    numeration: false,\n    numerationPlacement: 'start',\n    header: true,\n    headerAnimate: true,\n    headerInContent: false,\n    headerAnimateIn: 'slideInDown',\n    headerAnimateInSpeed: null,\n    headerAnimateInDelay: null,\n    headerAnimateOut: 'slideOutUp',\n    headerAnimateOutSpeed: 'fastest',\n    headerAnimateOutDelay: null,\n    footer: true,\n    footerAnimateIn: 'slideInUp',\n    footerAnimateInSpeed: null,\n    footerAnimateInDelay: null,\n    footerAnimateOut: 'slideOutDown',\n    footerAnimateOutSpeed: 'fastest',\n    footerAnimateOutDelay: null,\n    title: '',\n    titleAnimateIn: 'fadeInDown',\n    titleAnimateInSpeed: null,\n    titleAnimateInDelay: 'fastest',\n    titleAnimateOut: false,\n    titleAnimateOutSpeed: null,\n    titleAnimateOutDelay: null,\n    subtitle: '',\n    subtitleAnimateIn: 'fadeIn',\n    subtitleAnimateInSpeed: null,\n    subtitleAnimateInDelay: 'fast',\n    subtitleAnimateOut: false,\n    subtitleAnimateOutSpeed: null,\n    subtitleAnimateOutDelay: null,\n    icon: '',\n    iconClasses: '',\n    iconAnimateIn: 'zoomIn',\n    iconAnimateInSpeed: 'default',\n    iconAnimateInDelay: 'fastest',\n    iconAnimateOut: false,\n    iconAnimateOutSpeed: null,\n    iconAnimateOutDelay: null,\n    backdrop: true,\n    backdropClasses: null,\n    backdropClose: true,\n    backdropAnimateIn: 'fadeIn',\n    backdropAnimateInSpeed: 'fastest',\n    backdropAnimateOut: 'fadeOut',\n    backdropAnimateOutSpeed: 'fastest',\n    loader: true,\n    loaderAnimateIn: 'fadeIn',\n    loaderAnimateInSpeed: 'default',\n    loaderAnimateOut: 'fadeOut',\n    loaderAnimateOutSpeed: 'fastest',\n    nextAnimateIn: 'slideInRight',\n    nextAnimateInSpeed: null,\n    nextAnimateOut: 'slideOutLeft',\n    nextAnimateOutSpeed: null,\n    prevAnimateIn: 'slideInLeft',\n    prevAnimateInSpeed: null,\n    prevAnimateOut: 'slideOutRight',\n    prevAnimateOutSpeed: null,\n    attach: null,\n    attachPlacement: 'auto',\n    navKeyboard: true,\n    navPrevLabel: 'Prev',\n    navPrevAnimateIn: 'slideInLeft',\n    navPrevAnimateInSpeed: null,\n    navPrevAnimateInDelay: null,\n    navPrevAnimateOut: 'slideOutLeft',\n    navPrevAnimateOutSpeed: 'fastest',\n    navPrevAnimateOutDelay: null,\n    navNextLabel: 'Next',\n    navNextAnimateIn: 'slideInRight',\n    navNextAnimateInSpeed: null,\n    navNextAnimateInDelay: null,\n    navNextAnimateOut: 'slideOutRight',\n    navNextAnimateOutSpeed: 'fastest',\n    navNextAnimateOutDelay: null,\n    bodySelector: '.page-wrapper',\n    bodyTransitionScale: false,\n    bodyTransitionBlur: false,\n    svgOpen: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\">',\n    svgClose: '</svg>',\n    svgIconDownload: '<path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/><path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>',\n    svgIconShare: '<path fill-rule=\"evenodd\" d=\"M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z\"/><path fill-rule=\"evenodd\" d=\"M7.646.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 1.707V10.5a.5.5 0 0 1-1 0V1.707L5.354 3.854a.5.5 0 1 1-.708-.708l3-3z\"/>',\n    svgIconLink: '<path fill-rule=\"evenodd\" d=\"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z\"/><path d=\"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"/><path d=\"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"/>',\n    onSettings: null,\n    onBeforeOpen: null,\n    onOpen: null,\n    onAfterOpen: null,\n    onBeforeClose: null,\n    onClose: null,\n    onAfterClose: null,\n    onBeforeNext: null,\n    onNext: null,\n    onAfterNext: null,\n    onBeforePrev: null,\n    onPrev: null,\n    onAfterPrev: null,\n    onContentLoaded: null,\n  }, this.colorDefaults) as neoModal.NeoModalOptions;\n  protected eventMap:Map<string, Function> = new Map([\n    ['onSettings', ():ISignal<NeoModal, any> => {\n      return this.eventSettings.expose();\n    }],\n    ['onContentLoaded', ():ISignal<NeoModal, any> =>{\n      return this.eventContentLoaded.expose();\n    }],\n    ['onBeforeOpen', ():ISignal<NeoModal, any> => {\n      return this.eventBeforeOpen.expose();\n    }],\n    ['onOpen', ():ISignal<NeoModal, any> => {\n      return this.eventOpen.expose();\n    }],\n    ['onAfterOpen', ():ISignal<NeoModal, any> => {\n      return this.eventAfterOpen.expose();\n    }],\n    ['onBeforeClose', ():ISignal<NeoModal, any> => {\n      return this.eventBeforeClose.expose();\n    }],\n    ['onClose', ():ISignal<NeoModal, any> => {\n      return this.eventClose.expose();\n    }],\n    ['onAfterClose', ():ISignal<NeoModal, any> => {\n      return this.eventAfterClose.expose();\n    }],\n    ['onBeforeNext', ():ISignal<NeoModal, any> => {\n      return this.eventBeforeNext.expose();\n    }],\n    ['onNext', ():ISignal<NeoModal, any> => {\n      return this.eventNext.expose();\n    }],\n    ['onAfterNext', ():ISignal<NeoModal, any> => {\n      return this.eventAfterNext.expose();\n    }],\n    ['onBeforePrev', ():ISignal<NeoModal, any> => {\n      return this.eventBeforePrev.expose();\n    }],\n    ['onPrev', ():ISignal<NeoModal, any> => {\n      return this.eventPrev.expose();\n    }],\n    ['onAfterPrev', ():ISignal<NeoModal, any> => {\n      return this.eventAfterPrev.expose();\n    }],\n  ]);\n  // Options that support declaration via [data-neo-modal-*].\n  protected optionsAsAttributes:Array<string> = [\n    'appendTo',\n    'appendToClosest',\n    'wrapperClasses',\n    'modalClasses',\n    'colorScheme',\n    'width',\n    'height',\n    'zIndex',\n    'displaceTop',\n    'displaceRight',\n    'displaceBottom',\n    'displaceLeft',\n    'image',\n    'video',\n    'iframe',\n    'group',\n    'smartActions',\n    'numeration',\n    'fit',\n    'nest',\n    'drag',\n    'bodyLock',\n    'backdrop',\n    'header',\n    'headerInContent',\n    'footer',\n    'downloadLink',\n    'shareLink',\n    'copyLink',\n    'closeButton',\n    'contentScroll',\n    'contentPadding',\n    'title',\n    'subtitle',\n    'icon',\n    'placement',\n    'attach',\n    'attachPlacement',\n    'bodyTransitionScale',\n    'bodyTransitionBlur',\n    'contentAnimateIn',\n    'contentAnimateInSpeed',\n    'contentAnimateInDelay',\n    'contentAnimateOut',\n    'contentAnimateOutSpeed',\n    'contentAnimateOutDelay',\n  ];\n  protected optionsAsMerge:Array<string> = [\n    'title',\n    'subtitle',\n    'icon',\n    'image',\n    'video',\n    'iframe',\n    'content',\n    'trigger',\n  ];\n  // Options that, when boolean, should be set to default.\n  protected optionsFromBoolToDefault:Array<string> = [\n    'icon',\n  ];\n  protected loader:HTMLElement|null = null;\n  protected loading:boolean = false;\n  protected wrapper:HTMLElement|null = null;\n  protected modal:neoModal.NeoModalElement|null = null;\n  protected backdrop:HTMLElement|null = null;\n  protected groupTriggers:NodeListOf<HTMLElement>|null = null;\n  protected container:HTMLElement|null = null;\n  protected content:HTMLElement|null = null;\n  protected contentBlock:HTMLElement|null = null;\n  protected contentWrapper:HTMLElement|null = null;\n  protected contentInner:HTMLElement|null = null;\n  protected contentPlaceholder:HTMLElement|null = null;\n  protected header:HTMLElement|null = null;\n  protected headerStartOut:HTMLElement|null = null;\n  protected headerEndOut:HTMLElement|null = null;\n  protected footer:HTMLElement|null = null;\n  protected title:HTMLElement|null = null;\n  protected subtitle:HTMLElement|null = null;\n  protected icon:HTMLElement|null = null;\n  protected closeButton:HTMLElement|null = null;\n  protected next:HTMLElement|null = null;\n  protected prev:HTMLElement|null = null;\n  protected shareUrl:string = '';\n  protected downloadUrl:string = '';\n  protected copyUrl:string = '';\n  protected depth:number = 0;\n  protected isOpen:boolean = false;\n  protected isBuilt:boolean = false;\n  protected canZoom:boolean = false;\n  protected canClickContent:boolean = true;\n  protected throttle:ReturnType<typeof setTimeout>|null = null;\n  protected watchInterval:ReturnType<typeof setInterval>|null = null;\n  protected popper:Popper.instance|null = null;\n  private eventSettings = new Signal<NeoModal, neoModal.NeoModalOptions>();\n  private eventBeforeOpen = new Signal<NeoModal, void>();\n  private eventOpen = new Signal<NeoModal, void>();\n  private eventAfterOpen = new Signal<NeoModal, void>();\n  private eventBeforeClose = new Signal<NeoModal, void>();\n  private eventClose = new Signal<NeoModal, void>();\n  private eventAfterClose = new Signal<NeoModal, void>();\n  private eventBeforeNext = new Signal<NeoModal, void>();\n  private eventNext = new Signal<NeoModal, void>();\n  private eventAfterNext = new Signal<NeoModal, void>();\n  private eventBeforePrev = new Signal<NeoModal, void>();\n  private eventPrev = new Signal<NeoModal, void>();\n  private eventAfterPrev = new Signal<NeoModal, void>();\n  private eventContentLoaded = new Signal<NeoModal, void>();\n\n  /**\n   * Construct.\n   */\n  constructor(options:neoModal.NeoModalOptions) {\n    // Colors can always be set via [data-neo-modal-*].\n    for (let key in NeoModal.colorDefaults) {\n      this.optionsAsAttributes.push(key);\n    }\n\n    this.options = this.buildOptions(options);\n    if (this.options.trigger instanceof HTMLElement) {\n      this.options.trigger.neoModalOptions = this.options;\n    }\n\n    this.buildTrigger();\n  }\n\n  public static setDefaultOptions(options:any):void {\n    this.defaults = Object.assign({}, this.defaults, options);\n  }\n\n  public static getTop():NeoModal|null {\n    const modal = document.querySelector<HTMLElement>('.neo-modal:last-child') as neoModal.NeoModalElement;\n    if (modal && modal.neoModal) {\n      return modal.neoModal;\n    }\n    return null;\n  }\n\n  public static closeTop():void {\n    const neoModal = this.getTop();\n    if (neoModal) {\n      neoModal.close();\n    }\n  }\n\n  /**\n   * Get an event by name.\n   */\n  public event(eventName:string):any|null {\n    if (this.eventMap.has(eventName)) {\n      const method = this.eventMap.get(eventName);\n      if (method) {\n        return method();\n      }\n    }\n    return null;\n  }\n\n  protected buildOptions(options:neoModal.NeoModalOptions):neoModal.NeoModalOptions {\n    options = Object.assign({}, NeoModal.defaults, options);\n    // Set boolean options to default.\n    const opts:any = {};\n    this.optionsFromBoolToDefault.forEach((key) => {\n      const val = options[key as keyof neoModal.NeoModalOptions];\n      if (typeof val === 'boolean' && val === true) {\n        opts[key] = val;\n      }\n    });\n    // Get options from trigger data attributes.\n    if (options.trigger instanceof HTMLElement) {\n      const trigger = options.trigger;\n      this.optionsAsAttributes.forEach((attribute) => {\n        const property = 'data-neo-modal-' + attribute;\n        if (trigger.hasAttribute(property)) {\n          let value:any = trigger.getAttribute(property);\n          if (typeof value === 'string') {\n            if (value === 'true') {\n              value = true;\n            }\n            if (value === 'false') {\n              value = false;\n            }\n          }\n          opts[attribute] = value;\n        }\n      });\n    }\n    const builtOptions = Object.assign({}, options, opts);\n\n    // Listen for events passed in as options.\n    this.eventMap.forEach((method, event) => {\n      if (typeof builtOptions[event as keyof neoModal.NeoModalOptions] === 'function') {\n        const expose = method();\n        expose.on(builtOptions[event as keyof neoModal.NeoModalOptions] as (modal:NeoModal, data?:any) => void);\n      }\n    });\n\n    this.eventSettings.trigger(this, builtOptions);\n    return builtOptions;\n  }\n\n  protected mergeOptions(options:neoModal.NeoModalOptions):neoModal.NeoModalOptions {\n    const opts:any = {};\n    this.optionsAsMerge.forEach((key) => {\n      if (typeof this.options[key as keyof neoModal.NeoModalOptions] !== 'undefined' && typeof options[key as keyof neoModal.NeoModalOptions] !== 'undefined') {\n        opts[key] = options[key as keyof neoModal.NeoModalOptions];\n      }\n    });\n    return Object.assign({}, this.options, opts);\n  }\n\n  protected buildTrigger():void {\n    if (this.options.trigger instanceof HTMLElement) {\n      const trigger = this.options.trigger;\n      trigger.addEventListener('click', (event) => {\n        event.preventDefault();\n        this.toggle();\n      });\n    }\n  }\n\n  /**\n   * Build.\n   */\n  protected build():Promise<void> {\n    return new Promise((resolve) => {\n      if (this.isBuilt) {\n        resolve();\n      }\n      else {\n        if (this.wrapper) {\n          this.isBuilt = true;\n          this.modal = document.createElement('div') as neoModal.NeoModalElement;\n          this.modal.classList.add('neo-modal');\n          if (this.options.modalClasses) {\n            this.options.modalClasses.split(' ').forEach((className) => {\n              this.modal?.classList.add(className);\n            });\n          }\n          if (this.options.colorScheme) {\n            this.modal?.classList.add(this.options.colorScheme);\n          }\n          this.modal.neoModal = this;\n          // this.modal.setAttribute('neoModal', 'hi');\n          this.modal.setAttribute('role', 'dialog');\n          this.modal.setAttribute('aria-modal', 'true');\n          this.modal.style.setProperty('visibility', 'hidden');\n          this.modal.style.setProperty('pointer-events', 'none');\n          this.wrapper.appendChild(this.modal);\n\n          const container = this.buildContainer();\n          this.modal.appendChild(container);\n\n          this.buildContent(container).then(() => {\n            if (this.modal) {\n              this.buildNavigation(this.modal);\n            }\n            this.buildModal();\n            this.attachModal();\n            resolve();\n          });\n        }\n        else {\n          // Something happened. We don't have a wrapper?\n          resolve();\n        }\n      }\n    });\n  }\n\n  /**\n   * Rebuild modal with new options.\n   */\n  protected rebuild(newOptions:neoModal.NeoModalOptions):Promise<void> {\n    return new Promise((resolve) => {\n      if (this.modal && this.container) {\n        this.container.style.setProperty('visibility', 'hidden');\n        // Reset values that may be altered in the content.\n        this.canClickContent = true;\n        this.canZoom = false;\n        this.currentZoom = 1;\n        this.shareUrl = '';\n        this.copyUrl = '';\n        this.downloadUrl = '';\n        this.options = this.mergeOptions(newOptions);\n        this.buildContent(this.container).then(() => {\n          this.buildModal();\n          this.buildTooltips();\n          resolve();\n        });\n      }\n      else {\n        // Something went wrong. We don't have a container?\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * Build modal.\n   */\n  protected buildModal():void {\n    this.buildHeader();\n    this.buildFooter();\n    if (this.modal) {\n      this.modal.querySelectorAll('[data-neo-modal-close]').forEach((el) => {\n        el.addEventListener('click', e => {\n          this.close();\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      });\n    }\n    this.setAttributes();\n    this.size();\n  }\n\n  protected buildTooltips():void {\n    if (this.modal) {\n      this.modal.querySelectorAll('.neo-modal--tooltip:not(.neo-modal--tooltip-processed)').forEach((el) => {\n        el.classList.add('neo-modal--tooltip-processed');\n        tippy(el, {touch: false});\n      });\n    }\n  }\n\n  protected attachModal():void {\n    if (this.options.attach) {\n      const attach = this.options.attach;\n      let anchor:HTMLElement|null = null;\n      if (attach instanceof HTMLElement) {\n        anchor = attach;\n      }\n      else if (typeof this.options.attach === 'string') {\n        anchor = document.querySelector(this.options.attach) as HTMLElement;\n      }\n      if (anchor && this.content) {\n        this.popper = Popper.createPopper(anchor, this.content, {\n          placement: this.options.attachPlacement,\n        });\n      }\n    }\n  }\n\n  protected setAttributes():void {\n    if (this.modal) {\n      if (this.options.contentScroll) {\n        this.modal.classList.add('neo-modal--content-scroll');\n      }\n      else {\n        this.modal.classList.add('neo-modal--global-scroll');\n      }\n      for (let key in NeoModal.colorDefaults) {\n        if (this.options[key as keyof neoModal.NeoModalOptions]) {\n          const value = this.options[key as keyof neoModal.NeoModalOptions] as string;\n          const dashed = key.replace(/[A-Z]/g, m => \"-\" + m.toLowerCase()).replace('color-bg', 'bg');\n          this.modal.style.setProperty('--modal-' + dashed, value);\n        }\n      }\n      if (this.header) {\n        this.modal.classList.add('neo-modal--header-' + (this.options.headerInContent ? 'content' : 'global'));\n        this.modal.style.setProperty('--modal-padding-t', this.getAbsoluteHeight(this.header) + 'px');\n      }\n      if (this.options.contentPadding) {\n        if (typeof this.options.contentPadding === 'string') {\n          const isNum = /^\\d+$/.test(this.options.contentPadding);\n          if (isNum) {\n            this.options.contentPadding += 'px';\n          }\n          this.modal.style.setProperty('--modal-content-padding', this.options.contentPadding);\n        }\n        else if (typeof this.options.contentPadding === 'number') {\n          this.modal.style.setProperty('--modal-content-padding', this.options.contentPadding + 'px');\n        }\n      }\n      if (this.content) {\n        if (this.options.attach) {\n          this.modal.classList.add('neo-modal--attach');\n        }\n        if (this.options.fit) {\n          this.modal.classList.add('neo-modal--fit');\n        }\n        this.canClickContent ? this.modal.classList.remove('neo-modal--no-click') : this.modal.classList.add('neo-modal--no-click');\n        if (this.options.width) {\n          if (['auto', 'full'].includes(this.options.width as string)) {\n            this.modal.classList.add('neo-modal--width-' + this.options.width);\n          }\n          else {\n            let width = this.options.width;\n            if (typeof this.options.width === 'string') {\n              let isnum = /^\\d+$/.test(this.options.width);\n              if (isnum) {\n                width += 'px';\n              }\n            }\n            this.content.style.width = width + '';\n          }\n        }\n        if (this.options.height) {\n          if (['auto', 'full'].includes(this.options.height as string)) {\n            this.modal.classList.add('neo-modal--height-' + this.options.height);\n          }\n          else {\n            let height = this.options.height;\n            if (typeof this.options.height === 'string') {\n              let isnum = /^\\d+$/.test(this.options.height);\n              if (isnum) {\n                height += 'px';\n              }\n            }\n            else {\n              height += 'px';\n            }\n            this.content.style.minHeight = height + '';\n          }\n        }\n      }\n    }\n  }\n\n  public size():void {\n    if (this.container && this.modal) {\n      if (this.options.placement && !this.options.attach) {\n        // We remove placement so scroll can be properly calculated.\n        this.modal.classList.remove('neo-modal--placement-' + this.options.placement);\n      }\n      if (!this.options.fit && this.container.scrollHeight > this.container.clientHeight) {\n        this.modal.classList.remove('neo-modal--no-scroll');\n        this.modal.classList.add('neo-modal--scroll');\n      }\n      else {\n        this.modal.classList.remove('neo-modal--scroll');\n        this.modal.classList.add('neo-modal--no-scroll');\n      }\n      if (this.options.placement && !this.options.attach) {\n        // Add placement after scroll calculation.\n        this.modal.classList.add('neo-modal--placement-' + this.options.placement);\n      }\n      if (this.content) {\n        let offsetWidth = this.content.clientWidth;\n        if (this.headerStartOut && this.headerEndOut) {\n          offsetWidth += this.headerStartOut.clientWidth + this.headerEndOut.clientWidth;\n        }\n        else if (this.headerStartOut) {\n          // We double it because the modal is centered.\n          offsetWidth += this.headerStartOut.clientWidth * 2;\n        }\n        else if (this.headerEndOut) {\n          // We double it because the modal is centered.\n          offsetWidth += this.headerEndOut.clientWidth * 2;\n        }\n        if (this.container.clientWidth <= offsetWidth) {\n          if (!this.modal.classList.contains('neo-modal--flush')) {\n            this.modal.classList.add('neo-modal--flush');\n          }\n        }\n        else if (this.modal.classList.contains('neo-modal--flush')) {\n          this.modal.classList.remove('neo-modal--flush');\n        }\n      }\n    }\n  }\n\n  public watch():void {\n    this.size();\n  }\n\n  protected onKeyboardDown(event:KeyboardEvent):void {\n    if (this.options.fit && !this.focused) {\n      this.focusWatch();\n    }\n    if (event.key === 'Escape') {\n      const modal = document.querySelector<HTMLElement>('.neo-modal:last-child');\n      // We may have multiple modals open. Only close the top level.\n      if (modal === this.modal) {\n        this.close();\n      }\n    }\n    if (!this.throttle) {\n      if (event.key === 'ArrowRight') {\n        this.navigate('next');\n      }\n      if (event.key === 'ArrowLeft') {\n        this.navigate('prev');\n      }\n      this.throttle = setTimeout(() => {\n        this.throttle = null;\n      }, 100);\n    }\n  }\n\n  protected onKeyboardUp():void {\n    if (this.throttle) {\n      clearTimeout(this.throttle);\n      this.throttle = null;\n    }\n  }\n\n  protected focused:boolean = false;\n  protected focusing:boolean = false;\n  protected focusTimeout:ReturnType<typeof setTimeout>|null = null;\n  public focusWatch():void {\n    if (this.focused) {\n      this.focusOut();\n    }\n    clearTimeout(this.focusTimeout as ReturnType<typeof setTimeout>);\n    this.focusTimeout = setTimeout(() => {\n      this.focusIn();\n    }, 3000);\n  }\n\n  public focusIn():void {\n    if (this.focusing) {\n      return;\n    }\n    if (this.modal) {\n      this.modal.classList.add('neo-modal--focus');\n    }\n    this.focusing = true;\n    let callback:Function|null = () => {\n      this.focusing = false;\n    };\n    if (this.header) {\n      if (!this.options.headerInContent) {\n        this.animateOut(this.header, 'header', callback, 'default');\n        callback = null;\n      }\n    }\n    if (this.prev) {\n      this.animateOut(this.prev, 'navPrev', callback, 'default');\n      callback = null;\n    }\n    if (this.next) {\n      this.animateOut(this.next, 'navNext', callback, 'default');\n      callback = null;\n    }\n    if (this.footer) {\n      this.animateOut(this.footer, 'footer', callback, 'default');\n      callback = null;\n    }\n    this.focused = true;\n  }\n\n  protected focusOut():void {\n    if (this.focusing) {\n      return;\n    }\n    if (this.modal) {\n      this.modal.classList.remove('neo-modal--focus');\n    }\n    if (this.header) {\n      if (!this.options.headerInContent) {\n        this.animateIn(this.header, 'header');\n      }\n    }\n    if (this.prev) {\n      this.animateIn(this.prev, 'navPrev');\n    }\n    if (this.next) {\n      this.animateIn(this.next, 'navNext');\n    }\n    if (this.footer) {\n      this.animateIn(this.footer, 'footer');\n    }\n    this.focused = false;\n  }\n\n  protected currentZoom:number = 1;\n  protected minZoom:number = 1;\n  protected maxZoom:number = 3;\n  protected stepSize:number = 1;\n  protected zooming:boolean = false;\n  protected zoom(direction:number):void {\n    if (this.contentInner) {\n      if (this.zooming === true) {\n        return;\n      }\n      this.zooming = true;\n      setTimeout(() => {\n        this.zooming = false;\n      }, 500);\n      let newZoom = this.currentZoom + direction * this.stepSize;\n      // Limit the zoom level to the minimum and maximum\n      // values\n      if (newZoom < this.minZoom || newZoom > this.maxZoom) {\n          return;\n      }\n      const prefix = 'neo-modal--zoom-';\n      const pattern = '(' + prefix + '(\\\\s|(-)?(\\\\w*)(\\\\s)?)).*?';\n      const regEx = new RegExp(pattern, 'g');\n      this.contentInner.className = this.contentInner.className.replace(regEx, '');\n      this.contentInner.classList.add('neo-modal--zoom-' + this.currentZoom + 'to' + newZoom);\n      this.currentZoom = newZoom;\n    }\n  }\n\n  protected getGroupTriggers():NodeListOf<HTMLElement>|null {\n    if (this.options.group) {\n      if (!this.groupTriggers) {\n        this.groupTriggers = document.querySelectorAll<HTMLElement>('[data-neo-modal-group=\"' + this.options.group + '\"]');\n      }\n    }\n    return this.groupTriggers;\n  }\n\n  protected getToTrigger(direction:neoModal.Direction):neoModal.NeoModalTriggerElement|null {\n    const triggers = this.getGroupTriggers();\n    if (triggers && triggers.length > 1) {\n      let to:HTMLElement|null = null;\n      triggers.forEach((trigger, index) => {\n        if (trigger === this.options.trigger) {\n          if (direction === 'next') {\n            if (index < triggers.length - 1) {\n              to = triggers[index + 1];\n            }\n            else {\n              to = triggers[0];\n            }\n          }\n          if (direction === 'prev') {\n            if (index > 0) {\n              to = triggers[index - 1];\n            }\n            else {\n              to = triggers[triggers.length - 1];\n            }\n          }\n        }\n      });\n      return to;\n    }\n    return null;\n  }\n\n  protected navigate(direction:neoModal.Direction):void {\n    const triggers = this.getGroupTriggers();\n    if (this.contentBlock && triggers && triggers.length > 1) {\n      const to = this.getToTrigger(direction);\n      if (to) {\n        this.showLoader();\n        if (direction === 'prev') {\n          this.eventBeforePrev.trigger(this);\n        }\n        if (direction === 'next') {\n          this.eventBeforeNext.trigger(this);\n        }\n        if (!this.focused && this.header && !this.options.headerInContent) {\n          this.animateOut(this.header, 'header', null, 'default');\n        }\n        if (!this.focused && this.footer) {\n          this.animateOut(this.footer, 'footer', null, 'default');\n        }\n        this.animateOut(this.contentBlock, direction, () => {\n          if (direction === 'prev') {\n            this.eventPrev.trigger(this);\n          }\n          if (direction === 'next') {\n            this.eventNext.trigger(this);\n          }\n          this.rebuild(to.neoModalOptions).then(() => {\n            if (this.contentBlock) {\n              if (direction === 'prev') {\n                this.eventAfterPrev.trigger(this);\n              }\n              if (direction === 'next') {\n                this.eventAfterNext.trigger(this);\n              }\n              if (this.header && !this.options.headerInContent) {\n                this.focused ? this.header.style.display = 'none' : this.animateIn(this.header, 'header');\n              }\n              if (this.footer) {\n                this.focused ? this.footer.style.display = 'none' : this.animateIn(this.footer, 'footer');\n              }\n              this.modal?.style.setProperty('visibility', '');\n              this.container?.style.setProperty('visibility', '');\n              this.animateIn(this.contentBlock, direction);\n              if (direction === 'prev') {\n                this.eventPrev.trigger(this);\n              }\n              if (direction === 'next') {\n                this.eventNext.trigger(this);\n              }\n            }\n          });\n        });\n      }\n    }\n  }\n\n  protected remove():void {\n    if (this.modal) {\n      this.modal.remove();\n      this.modal = null;\n      this.isBuilt = false;\n    }\n  }\n\n  /**\n   * Build the global stack.\n   *\n   * This may be called multiple times, but will only build the stack once.\n   */\n  public buildStack():void {\n    this.buildWrapper();\n    const backdropInsert = this.buildBackdrop();\n    if (this.wrapper) {\n      this.wrapper.className = 'neo-modals';\n      this.wrapper.removeAttribute('style');\n      if (this.options.wrapperClasses) {\n        this.options.wrapperClasses.split(' ').forEach((className) => {\n          this.wrapper?.classList.add(className);\n        });\n      }\n      ['top', 'right', 'bottom', 'left'].forEach((direction) => {\n        const key = 'displace' + direction.charAt(0).toUpperCase() + direction.slice(1) as keyof neoModal.NeoModalOptions;\n        if (this.wrapper && typeof this.options[key] === 'string') {\n          this.wrapper.style.setProperty('--modal-displace-' + direction, this.options[key] as string);\n        }\n      });\n      if (this.options.zIndex) {\n        this.wrapper.style.setProperty('--modal-z-index', this.options.zIndex + '');\n      }\n      if (this.options.backdropColorBg) {\n        this.wrapper.style.setProperty('--modal-backdrop-bg', this.options.backdropColorBg);\n      }\n      if (this.options.colorScheme) {\n        this.wrapper.classList.add(this.options.colorScheme);\n      }\n    }\n    if (this.backdrop) {\n      this.backdrop.className = 'neo-modal--backdrop';\n      this.backdrop.removeAttribute('style');\n      if (this.options.backdropClasses) {\n        this.options.backdropClasses.split(' ').forEach((className) => {\n          this.backdrop?.classList.add(className);\n        });\n      }\n    }\n    if (backdropInsert) {\n      if (this.wrapper && this.backdrop) {\n        if (this.options.backdrop) {\n          this.backdrop.style.setProperty('visibility', '');\n        }\n        this.wrapper.appendChild(this.backdrop);\n        this.animateIn(this.backdrop, 'backdrop');\n      }\n    }\n    else if (this.backdrop) {\n      const visibility = window.getComputedStyle(this.backdrop).display !== 'none';\n      if (this.options.backdrop && !visibility) {\n        this.animateIn(this.backdrop, 'backdrop');\n      }\n      else if (!this.options.backdrop && visibility) {\n        this.animateOut(this.backdrop, 'backdrop');\n      }\n    }\n  }\n\n  protected buildWrapper():HTMLElement {\n    if (!this.wrapper) {\n      this.wrapper = document.querySelector('.neo-modals') as HTMLElement;\n      if (!this.wrapper) {\n        this.wrapper = document.createElement('div');\n        this.globalInit();\n        let appendTo = document.body;\n        if (this.options.appendToClosest && this.options.trigger) {\n          appendTo = this.options.trigger.closest(this.options.appendToClosest) as HTMLElement;\n        }\n        else if (this.options.appendTo) {\n          if (typeof this.options.appendTo === 'string') {\n            appendTo = document.querySelector(this.options.appendTo) as HTMLElement;\n          }\n          else {\n            appendTo = this.options.appendTo as HTMLElement;\n          }\n        }\n        appendTo.appendChild(this.wrapper);\n      }\n    }\n    return this.wrapper;\n  }\n\n  protected removeWrapper():void {\n    if (this.wrapper && this.wrapper.querySelectorAll('.neo-modal').length === 0) {\n      this.wrapper.remove();\n      this.wrapper = null;\n      this.globalDestroy();\n    }\n  }\n\n  protected buildBackdrop():boolean {\n    let insert = false;\n    this.backdrop = document.querySelector('.neo-modal--backdrop') as HTMLElement;\n    if (!this.backdrop) {\n      insert = true;\n      this.backdrop = document.createElement('div');\n      this.backdrop.className = 'neo-modal--backdrop';\n    }\n    return insert;\n  }\n\n  protected buildContainer():HTMLElement {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.container = document.createElement('div');\n    this.container.classList.add('neo-modal--container');\n    this.container.addEventListener('click', event => {\n      const target = event.target as HTMLElement;\n      if (this.options.backdropClose && target.classList.contains('neo-modal--container')) {\n        this.close();\n      }\n    });\n    return this.container;\n  }\n\n  protected buildNavigation(element:HTMLElement) {\n    if (this.options.group) {\n      const triggers = this.getGroupTriggers();\n      if (triggers && triggers.length > 1) {\n        this.prev = document.createElement('div');\n        this.prev.classList.add('neo-modal--nav');\n        this.prev.classList.add('neo-modal--prev');\n        this.prev.innerHTML = `<a class=\"neo-modal--tooltip\" data-tippy-theme=\"modal\" data-tippy-content=\"Prev\" data-tippy-placement=\"right\" data-tippy-delay=\"[500, 0]\"><span>${this.options.navPrevLabel}</span></a>`;\n        this.prev.querySelector('a')?.addEventListener('click', event => {\n          event.preventDefault();\n          this.navigate('prev');\n        });\n        element.appendChild(this.prev);\n\n        this.next = document.createElement('div');\n        this.next.classList.add('neo-modal--nav');\n        this.next.classList.add('neo-modal--next');\n        this.next.innerHTML = `<a class=\"neo-modal--tooltip\" data-tippy-theme=\"modal\" data-tippy-content=\"Next\" data-tippy-placement=\"left\" data-tippy-delay=\"[500, 0]\"><span>${this.options.navNextLabel}</span></a>`;\n        this.next.querySelector('a')?.addEventListener('click', event => {\n          event.preventDefault();\n          this.navigate('next');\n        });\n        element.appendChild(this.next);\n\n        this.buildDrag();\n      }\n    }\n    return null;\n  }\n\n  protected buildDrag():void {\n    if (this.modal) {\n      this.modal.classList.add('neo-modal--draggable');\n      this.modal.addEventListener('touchstart', this.onDragStart.bind(this), false);\n      this.modal.addEventListener('touchend', this.onDragEnd.bind(this), false);\n      this.modal.addEventListener('touchmove', this.onDrag.bind(this), false);\n      this.modal.addEventListener('mousedown', this.onDragStart.bind(this), false);\n      this.modal.addEventListener('mouseup', this.onDragEnd.bind(this), false);\n      this.modal.addEventListener('mouseout', this.onDragEnd.bind(this), false);\n      this.modal.addEventListener('mousemove', this.onDrag.bind(this), false);\n    }\n  }\n\n  protected dragStartX:number = 0;\n  protected dragStartY:number = 0;\n  protected dragEndX:number = 0;\n  protected dragEndY:number = 0;\n  protected dragThreshold:number = 50;\n  protected dragging:boolean = false;\n  protected onDragStart(e:MouseEvent|TouchEvent):void {\n    if (this.contentWrapper) {\n      this.dragging = true;\n      if (e.type === 'touchmove') {\n        e = e as TouchEvent;\n        this.dragStartX = this.dragEndX = e.touches[0].pageX;\n        this.dragStartY = this.dragEndY = e.touches[0].pageY;\n      }\n      else {\n        e = e as MouseEvent;\n        this.dragStartX = this.dragEndX = e.pageX;\n        this.dragStartY = this.dragEndY = e.pageY;\n      }\n    }\n  }\n\n  protected onDragEnd():void {\n    if (this.dragging) {\n      this.dragging = false;\n      if (this.contentWrapper) {\n        let direction:neoModal.Direction|null = null;\n        const diff = this.dragEndX - this.dragStartX;\n        if (diff < 0) {\n          direction = 'next';\n        }\n        if (diff > 0) {\n          direction = 'prev';\n        }\n        if (Math.abs(diff) > this.dragThreshold && direction) {\n          this.navigate(direction);\n        }\n        else {\n          this.contentWrapper.style.transform = '';\n          this.contentWrapper.style.opacity = '';\n        }\n      }\n    }\n  }\n\n  protected onDrag(e:MouseEvent|TouchEvent):void {\n    if (this.dragging) {\n      if (this.contentWrapper) {\n        if (e.type === 'touchmove') {\n          e = e as TouchEvent;\n          this.dragEndX = e.touches[0].pageX;\n          this.dragEndY = e.touches[0].pageY;\n        }\n        else {\n          e = e as MouseEvent;\n          this.dragEndX = e.pageX;\n          this.dragEndY = e.pageY;\n        }\n        const diffX = this.dragEndX - this.dragStartX;\n        const diffY = this.dragEndY - this.dragStartY;\n        const absDiffX = Math.abs(diffX);\n        const absDiffY = Math.abs(diffY);\n\n        if (absDiffX > absDiffY && absDiffX <= 180) {\n            const diffopac = Math.min(1, (1 - absDiffX / 180) * 1.5);\n            e.preventDefault();\n            this.contentWrapper.style.transform = 'translateX(' + diffX + 'px)';\n            this.contentWrapper.style.opacity = diffopac + '';\n        }\n      }\n    }\n  }\n\n  protected buildContent(element:HTMLElement):Promise<void> {\n    return new Promise((resolve) => {\n      if (!this.container) {\n        // Something went wrong. We dont' have a container?\n        resolve();\n      }\n\n      if (this.content) {\n        this.content.remove();\n        this.content = null;\n      }\n\n      this.showLoader();\n\n      this.content = document.createElement('div');\n      this.content.classList.add('neo-modal--content--container');\n\n      this.contentBlock = document.createElement('div');\n      this.contentBlock.classList.add('neo-modal--content-block');\n      this.content.appendChild(this.contentBlock);\n\n      element.appendChild(this.content);\n\n      this.buildContentByType(this.contentBlock).then(() => {\n        this.eventContentLoaded.trigger(this);\n        this.hideLoader();\n        this.bindContentEvents();\n        this.buildContentFooter();\n        resolve();\n      });\n    });\n  }\n\n  public refreshContent():void {\n    if (this.contentBlock) {\n      this.contentBlock.querySelector('.neo-modal--content-footer')?.remove();\n    }\n    this.buildContentFooter();\n  }\n\n  protected bindContentEvents():void {\n    if (this.contentInner && this.canZoom) {\n      this.contentInner.classList.add('neo-modal--zoom');\n      this.contentInner.addEventListener('wheel', (e) => {\n        e.preventDefault();\n        const direction = e.deltaY > 0 ? -1 : 1;\n        this.zoom(direction);\n      }, false);\n      this.contentInner.addEventListener('dblclick', () => {\n        const direction = this.currentZoom === 1 ? 1 : -1;\n        this.zoom(direction);\n      });\n    }\n  }\n\n  protected buildContentByType(element:HTMLElement):Promise<HTMLElement> {\n    return new Promise((resolve) => {\n      this.contentWrapper = document.createElement('div');\n      this.contentWrapper.classList.add('neo-modal--content-wrapper');\n\n      if (this.options.image) {\n        this.contentInner = this.getContentImage(resolve);\n      }\n      else if (this.options.video) {\n        this.contentInner = this.getContentVideo(resolve);\n      }\n      else if (this.options.iframe) {\n        this.contentInner = this.getContentIframe(resolve);\n      }\n      else {\n        this.contentInner = this.getContentDefault(resolve);\n      }\n\n      if (this.contentInner) {\n        this.contentInner.classList.add('neo-modal--content');\n        if (!this.options.colorSchemeInherit) {\n          this.contentInner.classList.add('scheme--reset');\n        }\n        this.contentWrapper.appendChild(this.contentInner);\n        element.appendChild(this.contentWrapper);\n      }\n      else {\n        // There was an issue with the content.\n        element.appendChild(this.contentWrapper);\n      }\n    });\n  }\n\n  protected getContentDefault(resolve:(content:HTMLElement) => void):HTMLElement {\n    let element:HTMLElement = document.createElement('div');\n    element.classList.add('neo-modal--content-missing');\n    element.innerText = 'Content not found.';\n    if (typeof this.options.content === 'function') {\n      element = document.createElement('div');\n      if (this.options.trigger) {\n        const content = this.options.content(this.options.trigger);\n        if (content instanceof HTMLElement) {\n          this.contentPlaceholder = document.createElement('template');\n          this.contentPlaceholder.classList.add('neo-modal--content-placeholder');\n          content.parentNode?.insertBefore(this.contentPlaceholder, content);\n          element.appendChild(content);\n        }\n        else {\n          element.innerHTML = content;\n        }\n      }\n    }\n    else if (typeof this.options.content === 'string') {\n      element = document.createElement('div');\n      element.innerHTML = this.options.content;\n    }\n    else {\n      this.contentInner = this.options.content as HTMLElement;\n    }\n    if (element.childElementCount) {\n      const child = element.firstElementChild as HTMLElement;\n      if (child) {\n        switch (child.tagName) {\n          case 'IMAGE':\n            const image = child as HTMLImageElement;\n            image.onload = () => {\n              resolve(element);\n            }\n            this.shareUrl = image.src;\n            this.downloadUrl = image.src;\n            this.copyUrl = image.src;\n            this.canZoom = this.options.fit;\n            return element;\n\n          case 'PICTURE':\n            const pictureImage = child.querySelector('img');\n            if (pictureImage) {\n              pictureImage.onload = () => {\n                this.shareUrl = pictureImage.currentSrc;\n                this.downloadUrl = pictureImage.currentSrc;\n                this.copyUrl = pictureImage.currentSrc;\n                this.canZoom = this.options.fit;\n                resolve(element);\n              }\n              if (this.options.group) {\n                // Fix weird drag.\n                pictureImage.addEventListener('dragstart', function(e) {\n                  e.preventDefault();\n                });\n              }\n              return element;\n            }\n            break;\n        }\n      }\n    }\n    resolve(element);\n    return element;\n  }\n\n  protected getContentImage(resolve:(content:HTMLElement) => void):HTMLElement {\n    const imageUrl = this.options.image || '';\n    const content = document.createElement('div');\n    const image = document.createElement('img');\n    this.canZoom = this.options.fit;\n    image.onload = () => {\n      resolve(content);\n    };\n    if (this.options.group) {\n      // Fix weird drag.\n      image.addEventListener('dragstart', function(e) {\n        e.preventDefault();\n      });\n    }\n    image.src = imageUrl;\n    content.appendChild(image);\n    this.shareUrl = imageUrl;\n    this.downloadUrl = imageUrl;\n    this.copyUrl = imageUrl;\n    return content;\n  }\n\n  protected getContentVideo(resolve:(content:HTMLElement) => void):HTMLElement {\n    const content = document.createElement('div');\n    if (this.options.video) {\n      const videoObj = this.parseVideo(this.options.video);\n      if (videoObj) {\n        const wrapper = document.createElement('div');\n        wrapper.classList.add('neo-modal--video');\n        wrapper.classList.add('neo-modal--ratio');\n        wrapper.classList.add('neo-modal--ratio-' + this.options.videoRatio);\n        wrapper.classList.add('bg-black');\n        this.canClickContent = false;\n        let stringAutoplay:string;\n        if (videoObj.type == 'vimeo' || videoObj.type == 'youtube') {\n          let player;\n          // set rel=0 to hide related videos at the end of YT + optional autoplay\n          stringAutoplay = this.options.videoAutoplay ? \"?rel=0&autoplay=1\" : \"?rel=0\";\n          let queryvars = stringAutoplay + this.getUrlParameter(this.options.video);\n          if (videoObj.type == 'vimeo') {\n            player = 'https://player.vimeo.com/video/';\n          } else if (videoObj.type == 'youtube') {\n            player = 'https://www.youtube-nocookie.com/embed/';\n          }\n          const iframe = document.createElement('iframe');\n          iframe.onload = () => {\n            resolve(content);\n          };\n          iframe.classList.add('neo-modal--iframe');\n          iframe.setAttribute('webkitallowfullscreen', '');\n          iframe.setAttribute('mozallowfullscreen', '');\n          iframe.setAttribute('allowfullscreen', '');\n          iframe.setAttribute('allow', 'autoplay');\n          iframe.setAttribute('frameborder', '0');\n          iframe.setAttribute('src', player+videoObj.id+queryvars);\n          wrapper.appendChild(iframe);\n          content.appendChild(wrapper);\n          // When set to auto width, default to 100%.\n          if (['auto'].includes(this.options.width as string) && this.content) {\n            this.content.style.width = 'calc(100% - 6rem)';\n          }\n          this.shareUrl = this.options.video;\n          this.downloadUrl = this.options.video;\n          this.copyUrl = this.options.video;\n          return content;\n        }\n\n        const video = document.createElement('video');\n        video.setAttribute('src', this.options.video);\n        video.innerText = 'Your browser does not support the video tag.';\n        if (this.options.videoAutoplay) {\n          video.setAttribute('autoplay', '');\n        }\n        wrapper.appendChild(video);\n        content.appendChild(wrapper);\n      }\n      else {\n        content.innerText = 'Video not found.';\n      }\n    }\n    resolve(content);\n    return content;\n  }\n\n  protected getContentIframe(resolve:(content:HTMLElement) => void):HTMLElement {\n    const content = document.createElement('div');\n    if (this.options.iframe) {\n      const iframe = document.createElement('iframe');\n      iframe.classList.add('neo-modal--iframe');\n      iframe.setAttribute('webkitallowfullscreen', '');\n      iframe.setAttribute('mozallowfullscreen', '');\n      iframe.setAttribute('allowfullscreen', '');\n      iframe.setAttribute('frameborder', '0');\n      iframe.setAttribute('src', this.options.iframe);\n      iframe.onload = () => {\n        resolve(content);\n      };\n      content.appendChild(iframe);\n    }\n    return content;\n  }\n\n  protected buildHeader():HTMLElement|null {\n    if (this.header) {\n      this.header.remove();\n      this.header = null;\n    }\n    if (this.options.header) {\n      const header = document.createElement('div');\n      header.classList.add('neo-modal--header');\n\n      const headerStart = document.createElement('div');\n      headerStart.classList.add('neo-modal--header-start');\n      const headerCenter = document.createElement('div');\n      headerCenter.classList.add('neo-modal--header-center');\n      const headerEnd = document.createElement('div');\n      headerEnd.classList.add('neo-modal--header-end');\n      // We store these as they are needed for sizing.\n      this.headerStartOut = document.createElement('div');\n      this.headerStartOut.classList.add('neo-modal--header-start-out');\n      this.headerStartOut.classList.add('neo-modal--header-out');\n      this.headerEndOut = document.createElement('div');\n      this.headerEndOut.classList.add('neo-modal--header-end-out');\n      this.headerEndOut.classList.add('neo-modal--header-out');\n\n      const label = this.buildLabel();\n      if (label) {\n        headerCenter.appendChild(label);\n      }\n\n      this.buildCloseButton();\n      if (this.closeButton) {\n        if (this.options.closeButton === 'start') {\n          headerStart.appendChild(this.closeButton);\n        }\n        else if (this.options.closeButton === 'start-out') {\n          this.headerStartOut.appendChild(this.closeButton);\n        }\n        else if (this.options.closeButton === 'end') {\n          headerEnd.appendChild(this.closeButton);\n        }\n        else if (this.options.closeButton === 'end-out') {\n          this.headerEndOut.appendChild(this.closeButton);\n        }\n      }\n\n      const numeration = this.buildNumeration();\n      if (numeration) {\n        if (this.options.numerationPlacement === 'start') {\n          headerStart.appendChild(numeration);\n        }\n        else if (this.options.numerationPlacement === 'end') {\n          headerEnd.prepend(numeration);\n        }\n      }\n\n      const hasHeaderStart = headerStart.childNodes.length > 0;\n      const hasHeaderCenter = headerCenter.childNodes.length > 0;\n      const hasHeaderEnd = headerEnd.childNodes.length > 0;\n      if (hasHeaderStart) {\n        header.appendChild(headerStart);\n      }\n      if (hasHeaderCenter) {\n        header.appendChild(headerCenter);\n      }\n      if (hasHeaderEnd) {\n        header.appendChild(headerEnd);\n      }\n      if (this.headerStartOut.childNodes.length > 0) {\n        header.appendChild(this.headerStartOut);\n      }\n      else {\n        this.headerStartOut = null;\n      }\n      if (this.headerEndOut.childNodes.length > 0) {\n        header.appendChild(this.headerEndOut);\n      }\n      else {\n        this.headerEndOut = null;\n      }\n\n      if (header.childNodes.length > 0) {\n        this.header = header;\n        if (this.options.headerInContent) {\n          if (this.contentBlock) {\n            this.contentBlock.prepend(this.header);\n          }\n        }\n        else if (this.modal) {\n          this.modal.appendChild(this.header);\n          if (hasHeaderCenter && (hasHeaderStart || hasHeaderEnd)) {\n            // We give the elements a moment to render.\n            setTimeout(() => {\n              if (hasHeaderStart && hasHeaderEnd) {\n                const minWidth = Math.max(headerStart.offsetWidth, headerEnd.offsetWidth);\n                headerStart.style.minWidth = minWidth + 'px';\n                headerEnd.style.minWidth = minWidth + 'px';\n              }\n              else if (hasHeaderStart) {\n                headerCenter.style.marginRight = headerStart.offsetWidth + 'px';\n              }\n              else {\n                headerCenter.style.marginLeft = headerEnd.offsetWidth + 'px';\n              }\n            }, 100);\n          }\n        }\n        return this.header;\n      }\n    }\n    return null;\n  }\n\n  protected buildNumeration():HTMLElement|null {\n    if (this.options.numeration) {\n      const triggers = this.getGroupTriggers();\n      if (triggers && triggers.length > 1) {\n        const numeration = document.createElement('div');\n        numeration.classList.add('neo-modal--numeration');\n        triggers.forEach((trigger, index) => {\n          if (numeration && trigger === this.options.trigger) {\n            numeration.innerHTML = '<span>' + (index + 1) + '</span> / <span>' + triggers.length + '</span>';\n          }\n        });\n        return numeration;\n      }\n    }\n    return null;\n  }\n\n  protected buildFooter():HTMLElement|null {\n    if (this.footer) {\n      this.footer.remove();\n      this.footer = null;\n    }\n    if (this.options.footer) {\n      const footer = document.createElement('div');\n      footer.classList.add('neo-modal--footer');\n\n      const inner = document.createElement('div');\n      inner.classList.add('neo-modal--footer-inner');\n\n      if (this.options.shareLink && this.shareUrl && typeof navigator.canShare !== 'undefined') {\n        inner.insertAdjacentHTML('beforeend', '<a class=\"neo-modal--tooltip neo-modal--share\" data-tippy-theme=\"modal\" data-tippy-content=\"Share\" data-tippy-delay=\"[200, 0]\" target=\"_blank\" href=\"' + this.shareUrl + '\" download>' + this.options.svgOpen + this.options.svgIconShare + this.options.svgClose + '</a>');\n        const shareLink = inner.querySelector('.neo-modal--share') as HTMLElement;\n        shareLink?.addEventListener('click', (e) => {\n          e.preventDefault();\n          const share:ShareData = {\n            title: this.options.title || '',\n            text: this.options.subtitle || '',\n            url: this.shareUrl,\n          };\n          navigator.share(share);\n        });\n      }\n\n      if (this.options.downloadLink && this.downloadUrl) {\n        inner.insertAdjacentHTML('beforeend', '<a class=\"neo-modal--tooltip neo-modal--download\" data-tippy-theme=\"modal\" data-tippy-content=\"Download\" data-tippy-delay=\"[200, 0]\" target=\"_blank\" href=\"' + this.downloadUrl + '\" download>' + this.options.svgOpen + this.options.svgIconDownload + this.options.svgClose + '</a>');\n      }\n\n      if (this.options.copyLink && this.copyUrl) {\n        const text = 'Copy';\n        inner.insertAdjacentHTML('beforeend', '<a class=\"neo-modal--tooltip neo-modal--copy\" data-tippy-theme=\"modal\" data-tippy-content=\"' + text + '\" data-tippy-delay=\"[200, 0]\">'+ this.options.svgOpen + this.options.svgIconLink + this.options.svgClose +'</a>');\n        const copyLink = inner.querySelector('.neo-modal--copy') as HTMLTippyElement;\n        copyLink?.addEventListener('click', (e) => {\n          e.preventDefault();\n          const url = this.copyUrl.substring(0, 1) === '/' ? window.location.origin + this.copyUrl : this.copyUrl;\n          navigator.clipboard.writeText(url).then(() => {\n            if (copyLink.hasOwnProperty('_tippy')) {\n              copyLink._tippy.setContent('Copied');\n              copyLink._tippy.show();\n              setTimeout(() => {\n                copyLink._tippy.hide();\n                setTimeout(() => {\n                  copyLink._tippy.setContent(text);\n                }, 1000);\n              }, 1000);\n            }\n          });\n        });\n      }\n\n      if (inner.childNodes.length > 0) {\n        this.footer = footer;\n        footer.appendChild(inner);\n        if (this.modal) {\n          this.modal.appendChild(this.footer);\n        }\n      }\n    }\n    return null;\n  }\n\n  protected buildContentFooter():HTMLElement|null {\n    const footer = document.createElement('div');\n    footer.classList.add('neo-modal--content-footer');\n\n    if (this.contentInner && this.options.smartActions) {\n      const actions = document.createElement('div');\n      actions.classList.add('neo-modal--actions');\n\n      const buttons:Array<HTMLElement> = [];\n\n      const formActions = this.contentInner.querySelectorAll<HTMLElement>('.form-actions');\n      if (formActions.length > 0) {\n        const lastFormAction = formActions[formActions.length - 1] as HTMLElement;\n        lastFormAction.style.display = 'none';\n        lastFormAction.querySelectorAll('input, button, a').forEach((button) => {\n          buttons.push(button as HTMLElement);\n        });\n      }\n      else {\n        this.contentInner.querySelectorAll('form > input[type=submit], form > button, .neo-modal--btn').forEach((button) => {\n          buttons.push(button as HTMLElement);\n        });\n      }\n      if (buttons.length) {\n        buttons.forEach((button) => {\n          button.style.display = 'none';\n          const clone = document.createElement('button');\n          clone.classList.add('neo-modal--btn');\n          clone.classList.add('btn');\n          if (button.classList.contains('button--primary')) {\n            clone.classList.add('btn-primary');\n          }\n          clone.innerHTML = button.getAttribute('value') || button.innerText;\n          clone.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            button.dispatchEvent(new Event('mousedown'));\n            button.click();\n            button.dispatchEvent(new Event('mouseup'));\n          });\n          actions.appendChild(clone);\n        });\n        footer.appendChild(actions);\n      }\n    }\n\n    if (footer.childNodes.length > 0) {\n      if (this.contentBlock) {\n        this.contentBlock.append(footer);\n      }\n    }\n    return null;\n  }\n\n  protected buildLabel():HTMLElement|null {\n    const label = document.createElement('div');\n    label.classList.add('neo-modal--label');\n\n    if (this.options.title || this.options.subtitle) {\n      const title = document.createElement('div');\n      title.classList.add('neo-modal--title');\n\n      if (this.options.title) {\n        this.title = document.createElement('h2');\n        this.title.innerHTML = '<span>' + this.options.title + '</span>';\n        title.appendChild(this.title);\n        label.classList.add('has-title');\n      }\n\n      if (this.options.subtitle) {\n        this.subtitle = document.createElement('h5');\n        this.subtitle.innerHTML = '<span>' + this.options.subtitle + '</span>';\n        title.appendChild(this.subtitle);\n        label.classList.add('has-subtitle');\n      }\n\n      label.appendChild(title);\n    }\n\n    if (this.options.icon) {\n      this.icon = document.createElement('div');\n      this.icon.classList.add('neo-modal--icon');\n      const icon = document.createElement('i');\n      if (this.options.iconClasses) {\n        this.options.iconClasses.split(' ').forEach((className) => {\n          icon.classList.add(className);\n        });\n      }\n      icon.classList.add(this.options.icon);\n      this.icon.appendChild(icon);\n      label.classList.add('has-icon');\n      label.prepend(this.icon);\n    }\n\n    return label.childNodes.length > 0 ? label : null;\n  }\n\n  protected buildCloseButton():HTMLElement|null {\n    if (this.options.closeButton) {\n      this.closeButton = document.createElement('a');\n      this.closeButton.classList.add('neo-modal--close');\n      this.closeButton.classList.add('neo-modal--tooltip');\n      this.closeButton.setAttribute('href', '');\n      this.closeButton.setAttribute('data-tippy-theme', 'modal');\n      this.closeButton.setAttribute('data-tippy-content', 'Close');\n      this.closeButton.setAttribute('data-tippy-placement', 'bottom');\n      this.closeButton.setAttribute('data-tippy-delay', '500');\n      this.closeButton.setAttribute('data-neo-modal-close', 'true');\n      const inner = document.createElement('span');\n      if (this.options.closeButtonClasses) {\n        this.options.closeButtonClasses.split(' ').forEach((className) => {\n          inner.classList.add(className);\n        });\n      }\n      if (this.options.closeButtonSvg) {\n        inner.innerHTML = this.options.closeButtonSvg;\n      }\n      // icon.classList.add(this.options.closeButton);\n      this.closeButton.appendChild(inner);\n    }\n    return this.closeButton;\n  }\n\n  protected loaderTimeout:ReturnType<typeof setTimeout>|null = null;\n  protected showLoader(delay?:number):void {\n    delay = typeof delay === 'number' ? delay : 300;\n    if (this.options.loader && !this.loading) {\n      this.loading = true;\n      if (typeof this.options.loader === 'function') {\n        this.options.loader('in');\n      }\n      else {\n        this.loaderTimeout = setTimeout(() => {\n          if (this.wrapper) {\n            if (typeof bodyScrollLock !== 'undefined') {\n              bodyScrollLock.lock();\n            }\n            else {\n              document.body.classList.add('has-neo-modal--loader');\n            }\n            this.loader = document.createElement('div');\n            this.loader.classList.add('neo-modal--loader');\n            this.loader.innerHTML = '<div><div class=\"neo-modal--spinner\"><div></div><div></div></div></div>';\n            if (this.options.loaderColor) {\n              this.loader.style.setProperty('--modal-loader-color', this.options.loaderColor);\n            }\n            if (this.options.loaderColorBg) {\n              this.loader.style.setProperty('--modal-loader-bg', this.options.loaderColorBg);\n            }\n            this.wrapper.appendChild(this.loader);\n            this.animateIn(this.loader, 'loader');\n          }\n        }, delay || 0);\n      }\n    }\n  }\n\n  protected hideLoader():void {\n    clearTimeout(this.loaderTimeout as ReturnType<typeof setTimeout>);\n    if (this.loading && this.options.loader) {\n      this.loading = false;\n      if (typeof this.options.loader === 'function') {\n        this.options.loader('out');\n      }\n      else if (this.loader) {\n        if (typeof bodyScrollLock !== 'undefined') {\n          bodyScrollLock.unlock();\n        }\n        else {\n          document.body.classList.remove('has-neo-modal--loader');\n        }\n        this.animateOut(this.loader, 'loader', () => {\n          this.loader?.remove();\n          this.loader = null;\n        });\n      }\n    }\n  }\n\n  protected toggle():void {\n    if (this.isOpen) {\n      this.close();\n    }\n    else {\n      this.open();\n    }\n  }\n\n  public open():void {\n    if (!this.options.nest) {\n      NeoModal.closeTop();\n    }\n    this.isOpen = true;\n    this.originalOptions = Object.assign({}, this.options);\n    this.eventBeforeOpen.trigger(this);\n    this.buildStack();\n    this.build().then(() => {\n      setTimeout(() => {\n        this.doOpen();\n      });\n    });\n  }\n\n  protected doOpen():void {\n    this.eventOpen.trigger(this);\n    this.watchInterval = setInterval(this.watch.bind(this), 200);\n    this.modal?.style.setProperty('visibility', '');\n    this.modal?.style.setProperty('pointer-events', '');\n\n    this.transitionBodyIn();\n\n    // Nest other modals.\n    const modals = document.querySelectorAll<HTMLElement>('.neo-modal:not(.neo-modal--closing)');\n    this.depth = modals.length;\n    for (let i = 0; i < modals.length; i++) {\n      const delta = modals.length - (i + 1);\n      delta === 0 ? modals[i].removeAttribute('data-neo-modal--depth') : modals[i].setAttribute('data-neo-modal--depth', delta + '');\n    }\n    if (modals.length > 1) {\n      const modal = modals[modals.length - 2] as neoModal.NeoModalElement;\n      if (modal.neoModal) {\n        modal.neoModal.focusIn();\n      }\n    }\n\n    if (this.header) {\n      if (!this.options.headerInContent) {\n        this.animateIn(this.header, 'header');\n      }\n      else if (this.headerStartOut || this.headerEndOut) {\n        if (this.headerStartOut) {\n          this.animateIn(this.headerStartOut, 'header');\n        }\n        if (this.headerEndOut) {\n          this.animateIn(this.headerEndOut, 'header');\n        }\n      }\n      if (this.options.headerAnimate) {\n        if (this.title) {\n          this.animateIn(this.title, 'title');\n        }\n        if (this.subtitle) {\n          this.animateIn(this.subtitle, 'subtitle');\n        }\n        if (this.icon) {\n          this.animateIn(this.icon, 'icon');\n        }\n        if (this.closeButton) {\n          this.animateIn(this.closeButton, 'closeButton');\n        }\n      }\n    }\n    if (this.prev) {\n      this.animateIn(this.prev, 'navPrev');\n    }\n    if (this.next) {\n      this.animateIn(this.next, 'navNext');\n    }\n    if (this.footer) {\n      this.animateIn(this.footer, 'footer');\n    }\n    if (this.contentBlock) {\n      this.animateIn(this.contentBlock, 'content', () => {\n        this.finishOpen();\n      });\n    }\n    else {\n      this.finishOpen();\n    }\n  }\n\n  protected finishOpen():void {\n    if (this.options.navKeyboard) {\n      document.body.addEventListener('keydown', this.onKeyboardDown.bind(this));\n      document.body.addEventListener('keyup', this.onKeyboardUp.bind(this));\n    }\n\n    if (this.options.fit) {\n      document.body.addEventListener('mousemove', this.focusWatch.bind(this), false);\n      this.focusWatch();\n    }\n\n    const focusableElements = 'a[href], details, [tabindex]';\n    const focusableFormElements = 'input:not([type=hidden]), textarea, select, button';\n    const keyboardfocusableElement = this.contentInner?.querySelector<HTMLElement>(\n      focusableFormElements\n    ) || this.modal?.querySelector<HTMLElement>(\n      focusableElements\n    ) || this.contentInner?.querySelector<HTMLElement>(\n      focusableElements\n    );\n    if (keyboardfocusableElement) {\n      keyboardfocusableElement.focus();\n    }\n    else if (this.options.trigger) {\n      this.options.trigger.blur();\n    }\n\n    this.buildTooltips();\n    this.eventAfterOpen.trigger(this);\n  }\n\n  public close():void {\n    this.isOpen = false;\n    this.modal?.classList.add('neo-modal--closing');\n    this.eventBeforeClose.trigger(this);\n    clearInterval(this.watchInterval as ReturnType<typeof setInterval>);\n    this.doClose().then(() => {\n      this.finishClose();\n    });\n\n    if (this.options.trigger) {\n      this.options.trigger.focus();\n    }\n  }\n\n  protected doClose():Promise<void> {\n    return new Promise((resolve) => {\n      this.eventClose.trigger(this);\n\n      this.transitionBodyOut();\n\n      // Unnest other modals.\n      const modals = document.querySelectorAll<HTMLElement>('.neo-modal');\n      for (let i = 0; i < modals.length; i++) {\n        const delta = modals.length - (i + 2);\n        if (delta >= 0) {\n          delta === 0 ? modals[i].removeAttribute('data-neo-modal--depth') : modals[i].setAttribute('data-neo-modal--depth', delta + '');\n        }\n      }\n      if (modals.length - 1 > 0) {\n        const modal = modals[modals.length - 2] as neoModal.NeoModalElement;\n        if (modal.neoModal) {\n          modal.neoModal.focusOut();\n          modal.neoModal.buildStack();\n        }\n      }\n\n      if (this.backdrop && this.depth === 1 && window.getComputedStyle(this.backdrop).display !== 'none') {\n        this.animateOut(this.backdrop, 'backdrop');\n      }\n      if (this.header) {\n        if (!this.options.headerInContent) {\n          this.animateOut(this.header, 'header');\n        }\n        if (this.options.headerAnimate) {\n          if (this.title) {\n            this.animateOut(this.title, 'title');\n          }\n          if (this.subtitle) {\n            this.animateOut(this.subtitle, 'title');\n          }\n          if (this.icon) {\n            this.animateOut(this.icon, 'icon');\n          }\n          if (this.closeButton) {\n            this.animateOut(this.closeButton, 'closeButton');\n          }\n        }\n      }\n      if (this.prev) {\n        this.animateOut(this.prev, 'navPrev');\n      }\n      if (this.next) {\n        this.animateOut(this.next, 'navNext');\n      }\n      if (this.footer) {\n        this.animateOut(this.footer, 'footer');\n      }\n      if (this.contentBlock) {\n        this.animateOut(this.contentBlock, 'content', () => {\n          resolve();\n        });\n      }\n      else {\n        resolve();\n      }\n    });\n  }\n\n  protected finishClose():void {\n    if (this.contentPlaceholder) {\n      const content = this.contentInner?.querySelector('.neo-modal-template');\n      if (content) {\n        this.contentPlaceholder.parentNode?.replaceChild(content, this.contentPlaceholder);\n      }\n    }\n    this.remove();\n    this.removeWrapper();\n    if (this.popper) {\n      this.popper.destroy();\n    }\n\n    // Restore original options if modal has been rebuild.\n    if (this.originalOptions) {\n      this.options = this.originalOptions;\n      this.originalOptions = null;\n    }\n\n    if (this.options.navKeyboard) {\n      document.body.removeEventListener('keydown', this.onKeyboardDown);\n      document.body.removeEventListener('keyup', this.onKeyboardUp);\n    }\n    this.wrapper = null;\n    document.body.removeEventListener('mousemove', this.focusWatch);\n    this.eventAfterClose.trigger(this);\n  }\n\n  protected globalInit():void {\n    document.body.classList.add('has-neo-modal');\n    if (this.options.bodyLock) {\n      if (typeof bodyScrollLock !== 'undefined') {\n        bodyScrollLock.lock();\n      }\n      else {\n        document.body.classList.add('neo-modal--body-lock');\n      }\n    }\n  }\n\n  protected globalDestroy():void {\n    document.body.classList.remove('has-neo-modal');\n    if (this.options.bodyLock) {\n      if (typeof bodyScrollLock !== 'undefined') {\n        bodyScrollLock.unlock();\n      }\n      else {\n        document.body.classList.remove('neo-modal--body-lock');\n      }\n    }\n  }\n\n  // GENERIC GETTERS\n  // --------------------------------------------------------------------------\n  public getModal():HTMLElement|null {\n    return this.modal;\n  }\n\n  public getContent():HTMLElement|null {\n    return this.contentInner;\n  }\n\n  // HELPERS\n  // --------------------------------------------------------------------------\n\n  /**\n   * Parse Youtube or Vimeo videos and get host & ID\n   */\n  protected parseVideo(url:string):{type:string, id:string}|null {\n    let type:string = '';\n    let vid:string = '';\n    let match;\n    let regYt = /(https?:\\/\\/)?((www\\.)?(youtube(-nocookie)?|youtube.googleapis)\\.com.*(v\\/|v=|vi=|vi\\/|e\\/|embed\\/|user\\/.*\\/u\\/\\d+\\/)|youtu\\.be\\/)([_0-9a-z-]+)/i;\n    match = url.match(regYt);\n    if (match && match[7]) {\n      type = 'youtube';\n      vid = match[7];\n    } else {\n      let regVim = /^.*(vimeo\\.com\\/)((channels\\/[A-z]+\\/)|(groups\\/[A-z]+\\/videos\\/))?([0-9]+)/;\n      match = url.match(regVim);\n      if (match && match[5]) {\n        type = 'vimeo';\n        vid = match[5];\n      }\n    }\n    if (type && vid) {\n      return {\n        type: type,\n        id: vid\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Get additional url parameters\n   */\n  protected getUrlParameter(url:string) {\n    let result = '';\n    let sPageURL = decodeURIComponent(url);\n    let firstsplit = sPageURL.split('?');\n    if (firstsplit[1] !== undefined) {\n      let sURLVariables = firstsplit[1].split('&');\n      let sParameterName;\n      let i;\n      for (i = 0; i < sURLVariables.length; i++) {\n        sParameterName = sURLVariables[i].split('=');\n        result = result + '&'+ sParameterName[0]+'='+ sParameterName[1];\n      }\n    }\n    return encodeURI(result);\n  }\n\n  // ANIMATIONS\n  // --------------------------------------------------------------------------\n\n  protected transitionBodyIn():void {\n    const modals = document.querySelectorAll<HTMLElement>('.neo-modal');\n    if (modals.length > 1) {\n      return;\n    }\n    if (this.options.bodyTransitionScale || this.options.bodyTransitionBlur) {\n      const body = document.querySelector(this.options.bodySelector);\n      if (body) {\n        body.classList.add('neo-modal--body-transition');\n        setTimeout(() => {\n          body.classList.add(...this.transitionBodyClasses());\n        });\n      }\n    }\n  }\n\n  protected transitionBodyOut():void {\n    const modals = document.querySelectorAll<HTMLElement>('.neo-modal');\n    if (modals.length > 1) {\n      return;\n    }\n    if (this.options.bodyTransitionScale || this.options.bodyTransitionBlur) {\n      const body = document.querySelector(this.options.bodySelector);\n      if (body) {\n        body.classList.remove(...this.transitionBodyClasses());\n        const parentCallback = () => {\n          body.removeEventListener('transitionend', parentCallback);\n          body.classList.remove('neo-modal--body-transition');\n        };\n        body.addEventListener('transitionend', parentCallback);\n      }\n    }\n  }\n\n  protected transitionBodyClasses():Array<string> {\n    const classes = [];\n    if (this.options.bodyTransitionScale) {\n      classes.push('neo-modal--body-scale');\n    }\n    if (this.options.bodyTransitionBlur) {\n      classes.push('neo-modal--body-blur');\n    }\n    return classes;\n  }\n\n  protected animate(el:HTMLElement, key:string, direction:neoModal.Movement, callback?:Function|null, speed?:string):void {\n    const op = direction.charAt(0).toUpperCase() + direction.slice(1);\n    const animationKey = key + 'Animate' + op as keyof neoModal.NeoModalOptions;\n    if (typeof this.options[animationKey] === 'string') {\n      const animation = this.options[animationKey];\n      const animationSpeed = key + 'Animate' + op + 'Speed' as keyof neoModal.NeoModalOptions;\n      const animationDelay = key + 'Animate' + op + 'Delay' as keyof neoModal.NeoModalOptions;\n      const parentCallback = () => {\n        el.removeEventListener('animationend', parentCallback);\n        el.removeEventListener('animationcancel', parentCallback);\n        el.classList.remove('neo-animate--animated');\n        el.classList.remove('neo-animate--' + animation);\n        if (typeof this.options[animationSpeed] === 'string') {\n          el.classList.remove('neo-animate--' + this.options[animationSpeed]);\n        }\n        if (typeof this.options[animationDelay] === 'string') {\n          el.classList.remove('neo-animate--delay-' + this.options[animationDelay]);\n        }\n        if (direction === 'out') {\n          el.style.display = 'none';\n        }\n        if (callback) {\n          callback();\n        }\n      };\n      el.addEventListener('animationend', parentCallback);\n      el.addEventListener('animationcancel', parentCallback);\n      el.style.display = '';\n      el.classList.add('neo-animate--' + animation);\n      if (speed || typeof this.options[animationSpeed] === 'string') {\n        el.classList.add('neo-animate--' + (speed || this.options[animationSpeed]));\n      }\n      if (typeof this.options[animationDelay] === 'string') {\n        el.classList.add('neo-animate--delay-' + this.options[animationDelay]);\n      }\n      el.classList.add('neo-animate--animated');\n    }\n    else if (callback) {\n      callback();\n    }\n  }\n\n  protected animateIn(el:HTMLElement, key:string, callback?:Function|null, speed?:string):void {\n    this.animate(el, key, 'in', callback, speed);\n  }\n\n  protected animateOut(el:HTMLElement, key:string, callback?:Function|null, speed?:string):void {\n    this.animate(el, key, 'out', callback, speed);\n  }\n\n  // UTILITIES\n  // --------------------------------------------------------------------------\n\n  protected getAbsoluteHeight(el:HTMLElement|string) {\n    // Get the DOM Node if you pass in a string\n    el = (typeof el === 'string') ? document.querySelector(el) as HTMLElement : el;\n\n    var styles = window.getComputedStyle(el);\n    var margin = parseFloat(styles['marginTop']) +\n                 parseFloat(styles['marginBottom']);\n\n    return Math.ceil(el.offsetHeight + margin);\n  }\n\n}\n\nwindow.NeoModal = NeoModal;\n\nexport {NeoModal};\n","import { NeoModal } from './modal/modal';\n\n(function (Drupal, drupalSettings, once) {\n\n  class DrupalDialogEvent extends Event {\n    dialog:NeoModal;\n    settings:drupal.IDrupalSettings|null;\n    constructor(type:string, dialog:NeoModal, settings:drupal.IDrupalSettings|null = null) {\n      super(`dialog:${type}`, { bubbles: true });\n      this.dialog = dialog;\n      this.settings = settings;\n    }\n  }\n\n  const defaultOptions = {\n    iconClasses: 'neo-icon neo-icon-font',\n    onContentLoaded: (modal:NeoModal) => {\n      const content = modal.getContent();\n      if (content) {\n        content.children[0]?.classList.add('neo-modal--processed');\n        Drupal.attachBehaviors(content, drupalSettings);\n      }\n    },\n    onAfterClose: (modal:NeoModal) => {\n      const content = modal.getContent();\n      if (content) {\n        Drupal.detachBehaviors(content, drupalSettings);\n      }\n    }\n  };\n  if (typeof drupalSettings.neoModal !== 'undefined' && typeof drupalSettings.neoModal.defaults !== 'undefined') {\n    Object.assign(defaultOptions, drupalSettings.neoModal.defaults);\n  }\n  NeoModal.setDefaultOptions(defaultOptions);\n\n  Drupal.behaviors.neoModal = {\n    attach: (context:HTMLElement, ) => {\n\n      // Rebuild content footer for content that may have changed within the\n      // top modal.\n      const modal = NeoModal.getTop();\n      if (modal) {\n        const content = modal.getContent();\n        if (content && content.children[0] && !content.children[0].classList.contains('neo-modal--processed')) {\n          modal.refreshContent();\n        }\n      }\n\n      once('neo.modal', '.use-neo-modal', context).forEach(el => {\n        const options:any = {};\n        options['trigger'] = el;\n        options['content'] = (ref:HTMLElement) => {\n          let template = ref.nextElementSibling;\n          if (template && template.tagName === 'TEMPLATE') {\n            return template.innerHTML;\n          }\n          if (template && template.classList.contains('neo-modal-template')) {\n            return template;\n          }\n          template = ref.querySelector('.neo-modal-template');\n          if (template && template.tagName === 'TEMPLATE') {\n            return template.innerHTML;\n          }\n          return '';\n        };\n\n        new NeoModal(options);\n      });\n    }\n  };\n\n  Drupal.neoModal = {\n    open: (options:any) => {\n      const modal = new NeoModal(options);\n      modal.event('onBeforeOpen').on(() => {\n        window.dispatchEvent(new DrupalDialogEvent('beforecreate', modal, drupalSettings));\n      });\n      modal.event('onOpen').on(() => {\n        window.dispatchEvent(new DrupalDialogEvent('aftercreate', modal, drupalSettings));\n      });\n      modal.event('onClose').on(() => {\n        window.dispatchEvent(new DrupalDialogEvent('beforeclose', modal, drupalSettings));\n      });\n      modal.event('onAfterClose').on(() => {\n        window.dispatchEvent(new DrupalDialogEvent('afterclose', modal, drupalSettings));\n      });\n      modal.open();\n    },\n    close: () => {\n      NeoModal.closeTop();\n    }\n  };\n\n  Drupal.behaviors.dialog = {};\n  Drupal.behaviors.dialog.prepareDialogButtons = () => {};\n\n})(Drupal, drupalSettings, once);\n\nexport {};\n"],"names":["Signal","__publicField","handler","h","source","data","_NeoModal","options","key","modal","neoModal","eventName","method","opts","val","trigger","attribute","property","value","builtOptions","event","resolve","_a","className","container","newOptions","el","attach","anchor","dashed","m","width","height","offsetWidth","callback","direction","newZoom","pattern","regEx","triggers","to","index","_b","backdropInsert","visibility","appendTo","insert","target","element","e","diff","diffX","diffY","absDiffX","absDiffY","diffopac","content","child","image","pictureImage","imageUrl","videoObj","wrapper","stringAutoplay","player","queryvars","iframe","video","header","headerStart","headerCenter","headerEnd","label","numeration","hasHeaderStart","hasHeaderCenter","hasHeaderEnd","minWidth","footer","inner","shareLink","share","text","copyLink","url","actions","buttons","formActions","lastFormAction","button","clone","title","icon","delay","modals","i","delta","_c","focusableElements","keyboardfocusableElement","type","vid","match","regYt","regVim","result","firstsplit","sURLVariables","sParameterName","body","parentCallback","classes","speed","op","animationKey","animation","animationSpeed","animationDelay","styles","margin","NeoModal","Drupal","drupalSettings","once","DrupalDialogEvent","dialog","settings","defaultOptions","context","ref","template"],"mappings":"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"}